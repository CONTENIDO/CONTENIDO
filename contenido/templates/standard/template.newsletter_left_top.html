<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="styles/contenido.css">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">    
    <script language="JavaScript" src="scripts/HTMLObj.js.php?contenido={SESSID}"></script>
    <script language="JavaScript" src="scripts/messageBox.js.php?contenido={SESSID}"></script>
    <script language="JavaScript" src="scripts/rowMark.js"></script>
    <script language="JavaScript" src="scripts/contenidoConfig.js"></script>
    <script language="JavaScript" src="scripts/infoBox.js"></script>
    <script language="JavaScript" src="scripts/general.js"></script>
    <script language="JavaScript" src="scripts/cfoldingrow.js"></script>
    <script language="JavaScript" src="scripts/parameterCollector.js"></script>
   

    <script language="JavaScript">
      var sid = '{SESSID}';
      box = new messageBox("", "", "", 0, 0);
			var actionURL='';
			var settingsURL='';
			var listoptionURL='';
			var pagingURL='';
      var listoptionURLDisp ='';
      var pagingURLDisp ='';
			var	actionURLRec = '';
			var	settingsURLRec = '';
			var	listoptionURLRec = '';
			var	pagingURLRec = '';
      var	actionURLGroup = '';
      var	listoptionURLGroup = '';
      var	pagingURLGroup = '';
      
      // save status of buttons
      var selectedButton = '';
      
      // Buttons and their images
	    var butNewsletter     = { imgId:'{INEWSLETTER}', containerId:'{ID_CNEWSLETTER}', imgOff:'images/newsletter_off.gif', imgOn:'images/newsletter_on.gif'};
	    var butDispatch       = { imgId:'{IDISPATCH}', containerId:'{ID_CDISPATCH}', imgOff:'images/newsletter_dispatch_off.gif', imgOn:'images/newsletter_dispatch_on.gif'};
	    var butRecipients     = { imgId:'{IRECIPIENTS}', containerId:'{ID_CRECIPIENTS}', imgOff:'images/newsletter_recipients_off.gif', imgOn:'images/newsletter_recipients_on.gif'};
	    var butRecipientgroup = { imgId:'{IRECIPIENTGROUP}', containerId:'{ID_CRECIPIENTGROUP}', imgOff:'images/newsletter_recipientgroups_off.gif', imgOn:'images/newsletter_recipientgroups_on.gif'};
      
      var buttonArray = new Array(butNewsletter, butDispatch, butRecipients, butRecipientgroup);
      
			function resizeFrame(arg)
			{
				if(arg == '')
				{
				  // Fetch links and store for later usage
					var actionLink = document.getElementById('{ACTIONLINK}');
					var settingsLink = document.getElementById('{SETTINGSLINK}');
					var listoptionLink = document.getElementById('{LISTOPTIONLINK}');
					var pagingLink = document.getElementById('{PAGINGLINK}');
					var listoptionLinkDisp = document.getElementById('{LISTOPTIONLINKDISP}');
					var pagingLinkDisp = document.getElementById('{PAGINGLINKDISP}');
					var actionLinkRec = document.getElementById('{ACTIONLINKREC}');
					var settingsLinkRec = document.getElementById('{SETTINGSLINKREC}');
					var listoptionLinkRec = document.getElementById('{LISTOPTIONLINKREC}');
					var pagingLinkRec = document.getElementById('{PAGINGLINKREC}');
          var actionLinkGroup = document.getElementById('{ACTIONLINKGROUP}');
          var listoptionLinkGroup = document.getElementById('{LISTOPTIONLINKGROUP}');
          var pagingLinkGroup = document.getElementById('{PAGINGLINKGROUP}');
          
					actionURL = actionLink.href;
					settingsURL = settingsLink.href;
					listoptionURL = listoptionLink.href;
					pagingURL = pagingLink.href;
					listoptionURLDisp = listoptionLinkDisp.href;
					pagingURLDisp = pagingLinkDisp.href;
					actionURLRec = actionLinkRec.href;
					settingsURLRec = settingsLinkRec.href;
					listoptionURLRec = listoptionLinkRec.href;
					pagingURLRec = pagingLinkRec.href;
					actionURLGroup = actionLinkGroup.href;
					listoptionURLGroup = listoptionLinkGroup.href;
					pagingURLGroup = pagingLinkGroup.href;
					
					// clicking the link now calls this function
					actionLink.href = "javascript:resizeFrame('{ACTIONLINK}')";
					settingsLink.href = "javascript:resizeFrame('{SETTINGSLINK}')";
					listoptionLink.href = "javascript:resizeFrame('{LISTOPTIONLINK}')";
					pagingLink.href = "javascript:resizeFrame('{PAGINGLINK}')";
					listoptionLinkDisp.href = "javascript:resizeFrame('{LISTOPTIONLINKDISP}')";
					pagingLinkDisp.href = "javascript:resizeFrame('{PAGINGLINKDISP}')";
					actionLinkRec.href = "javascript:resizeFrame('{ACTIONLINKREC}')";
					settingsLinkRec.href = "javascript:resizeFrame('{SETTINGSLINKREC}')";
					listoptionLinkRec.href = "javascript:resizeFrame('{LISTOPTIONLINKREC}')";
					pagingLinkRec.href = "javascript:resizeFrame('{PAGINGLINKREC}')";
          actionLinkGroup.href = "javascript:resizeFrame('{ACTIONLINKGROUP}')";
          listoptionLinkGroup.href = "javascript:resizeFrame('{LISTOPTIONLINKGROUP}')";
          pagingLinkGroup.href = "javascript:resizeFrame('{PAGINGLINKGROUP}')";
          
  				// for first load set focus to newsletter
  				toggleContainer('{INEWSLETTER}');
  				hoverEffect('{ID_CNEWSLETTER}', 'on');
				}
				else if(arg == '{ACTIONLINK}')
				{
					window.location.href=actionURL;
				}
				else if(arg == '{SETTINGSLINK}')
				{
					window.location.href=settingsURL;
				}
				else if(arg == '{LISTOPTIONLINK}')
				{
					window.location.href=listoptionURL;
				}
				else if(arg == '{PAGINGLINK}')
				{
					window.location.href=pagingURL;
				}
				else if(arg == '{LISTOPTIONLINKDISP}')
				{
					window.location.href=listoptionURLDisp;
				}
				else if(arg == '{PAGINGLINKDISP}')
				{
					window.location.href=pagingURLDisp;
				}
				else if(arg == '{ACTIONLINKREC}')
				{
					window.location.href=actionURLRec;
				}
				else if(arg == '{SETTINGSLINKREC}')
				{
					window.location.href=settingsURLRec;
				}
				else if(arg == '{LISTOPTIONLINKREC}')
				{
					window.location.href=listoptionURLRec;
				}
				else if(arg == '{PAGINGLINKREC}')
				{
					window.location.href=pagingURLRec;
				}
				else if(arg == '{ACTIONLINKGROUP}')
				{
					window.location.href=actionURLGroup;
				}
				else if(arg == '{LISTOPTIONLINKGROUP}')
				{
					window.location.href=listoptionURLGroup;
				}
				else if(arg == '{PAGINGLINKGROUP}')
				{
					window.location.href=pagingURLGroup;
				}
				
				// resizing frame
				window.setTimeout("parent.parent.frameResize.resizeTopLeftFrame(document.getElementById('top_left_container').offsetHeight+1)", 10);
			}
			
      function showSendTestMsg(lngId) 
      {
        box.confirm("'.$sSendTestTitle.'", "'.$sSendTestDescr.'", "sendTestNewsletter(\'" + lngId + "\')");
      }

      function showDelMsg(lngId, strElement) 
      {
        box.confirm("'.$sDelTitle.'", "'.$sDelDescr.'<b>" + strElement + "</b>", "deleteNewsletter(\'" + lngId + "\')");
      }

	    /* Enabled/Disable group box */
      function checkSelection(strValue)
      {
        if (strValue == "selection") 
        {
          document.getElementById("groupselect").disabled = false;
        } 
        else 
        {
          document.getElementById("groupselect").disabled = true;
        }
      }

      /* Function for sending test newsletter */
      /*
      function sendTestNewsletter(idnewsletter)
      {
        oForm = document.getElementById("filterform");
        url  = "main.php?area=news";
        url += "&action=news_send_test";
        url += "&frame=4";
        url += "&idnewsletter=" + idnewsletter;
        url += "&contenido=" + sid;
        url += get_registered_parameters();
        url += "&sortby=" + oForm.sortby.value;
        url += "&sortorder=" + oForm.sortorder.value;
        url += "&filter=" + oForm.filter.value;
        url += "&elemperpage=" + oForm.elemperpage.value;
        parent.parent.right.right_bottom.location.href = url;
      }
			*/
      /* Function for deleting newsletters */
      /*
      function deleteNewsletter(idnewsletter)
      {
        oForm = document.getElementById("filterform");
        url  = "main.php?area=news";
        url += "&action=news_delete";
        url += "&frame=4";
        url += "&idnewsletter=" + idnewsletter;
        url += "&contenido=" + sid;
        url += get_registered_parameters();
        url += "&sortby=" + oForm.sortby.value;
        url += "&sortorder=" + oForm.sortorder.value;
        url += "&filter=" + oForm.filter.value;
        url += "&elemperpage=" + oForm.elemperpage.value;
        parent.parent.right.right_bottom.location.href = url;
      }
			*/
			
			function toggleContainer(activeButton)
			{
			  // remember selected
			  selectedButton = activeButton;

			  for(var i=0; i < buttonArray.length; i++)
			  {
			    // make selected container visible
			    if(activeButton == buttonArray[i].imgId)
			    {
			      document.getElementById(buttonArray[i].containerId).style.display = 'block';
			    }
			    // render other containers invisible
			    else
		      {
		        document.getElementById(buttonArray[i].containerId).style.display = 'none'; 
		      }
			  }
			  hoverEffect(activeButton, 'in');
			  resizeFrame(activeButton);
			}
			
			function hoverEffect(actButton, stat)
			{
		    // fetch the button object
		    for(var i=0; i < buttonArray.length; i++)
		    {
		      // highlight image on enter, gray image on mouse out
		      if(buttonArray[i].imgId == actButton && actButton != selectedButton)
		      {
		        if(stat == 'in')
		        {
		          document.getElementById(buttonArray[i].imgId).src=buttonArray[i].imgOn;
		        }
		        else
	          {
	            document.getElementById(buttonArray[i].imgId).src=buttonArray[i].imgOff;  
	          }
		      }
		      else if(buttonArray[i].imgId != selectedButton)
	        {
	          document.getElementById(buttonArray[i].imgId).src=buttonArray[i].imgOff;
	        }
		    }
			}
			
			function reloadLeftBottomAndTransportFormVars(theform)
			{
				var formElements = theform.elements;
				var multilink = "main.php?";
			  for(var i=0; i<formElements.length; i++)
			  {
			    if(i>0 && formElements[i].name != "" && formElements[i].value != "")
			    {
			      multilink += "&";
			    }
			    if(formElements[i].name != "" && formElements[i].value != "")
			    {
			      multilink += formElements[i].name + "=" + formElements[i].value;
			    }
			  }
			  conMultiLink("left_bottom", multilink);
			}

			function showPurgeMsg(sMsgPurgeTitle, sMsgPurgeDescr)
			{
      	box.confirm(sMsgPurgeTitle, sMsgPurgeDescr, "purgeRecipients()");
      }

      function purgeRecipients()
      {
	      //oForm = top.content.left.left_top.document.getElementById("recipient_listoptionsform");
	      oForm = document.getElementById("recipients_listoptionsform");
	
	      url  = "main.php?area=recipients";
	      url += "&action=recipients_purge";
	      url += "&frame=4";
	      url += "&contenido=" + sid;
	      url += get_registered_parameters();
	      url += "&restrictgroup=" + oForm.restrictgroup.value;
	      url += "&sortby=" + oForm.sortby.value;
	      url += "&sortorder=" + oForm.sortorder.value;
	      url += "&filter=" + oForm.filter.value;
	      url += "&elemperpage=" + oForm.elemperpage.value;
	
	      parent.parent.right.right_bottom.location.href = url;
			}
			
						
    </script>
  
	  
</head>
<body onLoad="resizeFrame('')" bgcolor="#FFFFFF">

<div id="top_left_container" style="margin: 1px 0 0 0; border: 1px solid #B3B3B3;padding-top: 7px">
  <div style="height:2em;margin: 0 0 0 17px;padding-bottom:5px;">{BUTTONROW}</div>
  {CNEWSLETTER}
  {CDISPATCH}
  {CRECIPIENTS}
  {CRECIPIENTGROUP}
</div>

</body>
</html>
