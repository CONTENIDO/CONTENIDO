<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <title></title>
    <meta http-equiv="expires" content="0">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="pragma" content="no-cache">
    <link rel="stylesheet" type="text/css" href="styles/contenido.css">
    <script type="text/javascript" src="scripts/rowMark.js"></script>
    <script type="text/javascript" src="scripts/messageBox.js.php?contenido={SID}"></script>
    <script type="text/javascript" src="scripts/articleObject.js.php?contenido={SID}"></script>
    <link rel="stylesheet" type="text/css" href="styles/tipsy.css">
    <script type="text/javascript" src="scripts/jquery/jquery.js"></script>
    <script type="text/javascript" src="scripts/jquery.tipsy.js"></script>
    <script type="text/javascript" src="scripts/registerTipsy.js"></script>
    <script type="text/javascript">
        // CONTENIDO Session-ID
        var sid = '{SID}';
        // new messageBox instance
        box = new messageBox('', '', '', 0, 0);
    </script>
    <style>
        .bulk_editing_functions a, a.flip_mark {
            cursor:pointer;
        }
        .bulk_editing_functions a img, a.flip_mark img {
            vertical-align:middle;
            margin-right:3px;
        }
    </style>
</head>
<body style="margin:10px">
<form action="" name="bulk_editing" class="bulk_editing_form" method="post">
    <input type="hidden" name="area" value="" />
    <input type="hidden" name="frame" value="4" />
    <input type="hidden" name="action" value="" />
    <input type="hidden" name="contenido" value="{SID}" />
    <input type="hidden" name="idmails" value=""/>
    <input type="hidden" name="mail_status" value="{MAIL_STATUS}" />
    <input type="hidden" name="mail_client" value="{MAIL_CLIENT}" />
    <input type="hidden" name="idmail" value="{IDMAIL}" />
    <input type="submit" name="submit" value="senden" style="display:none;" />
</form>

<table width="100%" cellspacing="0" cellpadding="2" border="0">
   <tr valign="middle">
        <td style="border:1px; border-color: #B3B3B3; height:20px; line-height:20px; text-align:right; border-style: solid; background-color: #E2E2E2; " colspan="7">
            <div style="float:left; heigth:20px; line-height:20px; vertical-align:middle;  width:600px; text-align:left;">
                <div class="bulk_editing_functions" style="float:left;height:16px; display:none;">
                    <span>i18n("Apply to all selected emails"):</span>
                    <a class="con_deleteart" onclick="box.confirm('{DELETE_TITLE}', '{DELETE_TEXT}','deleteEmails()');" > <img src="images/delete.gif" title='i18n("Delete articles")' alt='i18n("Delete articles")' border="0" ></a>
                    <span style="padding-left:15px;">&nbsp;</span>
                </div>
                <a class="flip_mark"><img alt="i18n('Flip Selection')" title="Markierung umkehren" src="images/but_invert_selection.gif" style="margin-right:0px; vertical-align:middle;">i18n("Flip Selection")</a>
            </div>
            <div style="clear:both;"></div>
        </td>
    </tr>
    <tr height="10">
        <td colspan="7"></td>
    </tr>
</table>

<table class="bordered" width="100%" border="0" cellspacing="0" cellpadding="2">
    <tr>
        {HEADERS}
    </tr>
    <!-- BEGIN:BLOCK -->
    <tr id="{ROWID}" {CSS_CLASS} class="con_sync" style="background-color: {BGCOLOR};" onmouseover="artRow.over(this)" onmouseout="artRow.out(this)" onclick="artRow.click(this)">
        {CELLS}
    </tr>
    <!-- END:BLOCK -->
</table>

<table width="100%" cellspacing="0" cellpadding="2" border="0">
    <tr height="10">
        <td colspan="7"></td>
    </tr>
    <tr valign="middle">
        <td style="border:1px; border-color: #B3B3B3; height:20px; line-height:20px; text-align:right; border-style: solid; background-color: #E2E2E2; " colspan="7">
            <div style="float:left; heigth:20px; line-height:20px; vertical-align:middle;  width:600px; text-align:left;">
                <div class="bulk_editing_functions" style="float:left;height:16px; display:none;">
                    <span>i18n("Apply to all selected emails"):</span>
                    <a class="con_deleteart" onclick="box.confirm('{DELETE_TITLE}', '{DELETE_TEXT}','deleteEmails()');" > <img src="images/delete.gif" title='i18n("Delete articles")' alt='i18n("Delete articles")' border="0" ></a>
                    <span style="padding-left:15px;">&nbsp;</span>
                </div>
                <a class="flip_mark"><img alt="i18n('Flip Selection')" title="Markierung umkehren" src="images/but_invert_selection.gif" style="margin-right:0px; vertical-align:middle;"> i18n("Flip Selection")</a>
            </div>
            <div style="clear:both;"></div>
        </td>
    </tr>
    <tr height="10">
        <td colspan="7"></td>
    </tr>
</table>

<script type="text/javascript">
$(document).ready(function () {
    // flip selection
    $('a.flip_mark').click(function () {
        $('div.bulk_editing_functions').hide();
        $('input.mark_emails').each(function(index, value) {
            if ($(this).prop('checked') == 'checked') {
                $(this).removeProp('checked');
            } else {
                $('div.bulk_editing_functions').show();
                $(this).prop('checked', 'checked');
            }
        });
    });

    // show or hide functions on click on checkboxes
    $('input.mark_emails').click(function () {
        $('div.bulk_editing_functions').hide();
        if ($(this).prop('checked') == 'checked') {
            $('div.bulk_editing_functions').show();
        } else {
            if ($('input.mark_emails:checked').length > 0) {
                $('div.bulk_editing_functions').show();
            }
        }

    });

    // redirect to the detail page when info button is clicked
    $('a.get_info').click(function () {
        var id = $(this).attr('id');
        // set area
        $('form.bulk_editing_form input[name="area"]').val('mail_log_detail');
        // set action
        $('form.bulk_editing_form input[name="action"]').val('detail');
        // set idmails
        $('form.bulk_editing_form input[name="idmail"]').val($('input.'+id).val());
        // send form
        $('form.bulk_editing_form input[name="submit"]').click();

        return false;
    });

    // Mark the first submenu item i.e. 'Overview' or other item
    if (parent.parent.frames['right'].frames['right_top'].document.getElementById('navlist')) {
        menuItem = parent.parent.frames['right'].frames['right_top'].document.getElementById('navlist');
        $(menuItem).find('a').removeClass('current');
        var selectedArea =  $(menuItem).find('a.{AREA}');
        if (selectedArea.length == 0) {
            $(menuItem).find('a:first').addClass('current');
        } else {
            selectedArea.addClass('current');
        }
    }
});

function deleteEmails() {
    var idmails = '[';
    $('input.mark_emails').each(function(index, value) {
        if($(this).attr('checked') == 'checked') {
            idmails += $(this).val() + ',';
        }
    });
    idmails = idmails.substring(0, idmails.length - 1);
    idmails += ']';
    // set area
    $('form.bulk_editing_form input[name="area"]').val('mail_log_overview');
    // set action
    $('form.bulk_editing_form input[name="action"]').val('delete');
    // set idmails
    $('form.bulk_editing_form input[name="idmails"]').val(idmails);
    // send form
    $('form.bulk_editing_form input[name="submit"]').click();
}
</script>
</body>
</html>