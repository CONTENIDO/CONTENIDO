<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
    <title>CONTENIDO - Making plugins translatable</title>
    <link rel="stylesheet" href="../assets/techref.css" type="text/css" media="all">
</head>

<body>

<div id="header">
    <img src="../assets/conlogo.gif" alt="CONTENIDO Logo">
    <h1>Making plugins translatable</h1>
</div>

<div class="section">
  <table class="info" border="0" cellpadding="2" cellspacing="2">
    <tbody>
      <tr>
        <td>Author</td>
        <td>Timo A. Hummel</td>
      </tr>
      <tr>
        <td>Created</td>
        <td>5th November 2003</td>
      </tr>
      <tr>
        <td>Audience</td>
        <td>Plugin Developers</td>
      </tr>
      <tr>
        <td>Applies to</td>
        <td>CONTENIDO 4.4 or later</td>
      </tr>
    </tbody>
  </table>
</div>

<div class="section">
<h2>The plugin's configuration</h2>
If your plugin has actions which needs to be translatable (of course
:)), you need a plugin configuration file.<br>
<br>
This file <strong>needs</strong>to be placed
in the "includes"-Directory of your plugin and needs to be named <strong>config.plugin.php</strong>.<br>
<br>
Example:<br>
<pre>
&lt;?php

// Config file for the TEST plugin
$lngAct["test_dosomething"] = i18n("Does something useful", "test");

?&gt;</pre>
<br>
Note that the plugin developer doesn't need to take care of the i18n
domain binding; all that is done during initialisation.
</div>

<div class="section">
<h2>Letting CONTENIDO know about foreign "domains"</h2>
A "domain" in terms of the GNU gettext library defines in which path a
specific translation can be found. For plugins, the domain is
automatically set to the plugin's directory. All you need to do is to
create a directory structure similar to CONTENIDO's locale directory,
and place .po files in it (note: The .po-Files need to be named like
your plugin's name and plugin directory, e.g. the plugin "test" should
reside in the directory "test" and the .po-Files have to be named
"test.po").
</div>

<div class="section">
<h2>Translating plugins</h2>
To create a translated string in the plugin itself, you need to use
<strong>i18n("TEXT", "&lt;DOMAIN&gt;");</strong>.
In the example above, we would write <strong>i18n("TEXT", "test");</strong>.
Note that domain names are case sensitive.
</div>

<div class="section">
<h2>Where's the magic?</h2>
Originally, the "magic" (including the plugin's configuration and i18n
domain bindings) took place in the file config.php. As config.php is
included even if we don't have a backend language (in fact, the
information about the backend language is never available in the config
file), the magic happens in cfg_actions.inc.php. This is the only
place where the proper initialisation of the plugin's config.plugin.php
file can be guaranteed.
</div>

</body>
</html>
